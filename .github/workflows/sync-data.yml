- name: Commit & push changes (force-add even if ignored)
  run: |
    echo "---- git status BEFORE ----"
    git status --porcelain || true

    echo "---- .gitignore (if any) ----"
    cat .gitignore || true

    # Stage generated files even if .gitignore blocks them
    git add -A -f data/
    if [ -f summary.json ]; then git add -f summary.json; fi

    echo "---- git status AFTER add ----"
    git status --porcelain || true

    echo "---- STAGED FILES ----"
    git diff --cached --name-only || true

    if git diff --cached --quiet; then
      echo "No changes to commit."
      exit 0
    fi

    git config user.name  "github-actions[bot]"
    git config user.email "41898282+github-actions[bot]@users.noreply.github.com"
    git commit -m "Daily TCG data update - $(date -u +%Y-%m-%d)"
    git push
